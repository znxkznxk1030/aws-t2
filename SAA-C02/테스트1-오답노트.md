# 테스트1-오답노트

## 탄력적인 아키텍처 설계

### RDS 재해복구

동일하거나 다른 가용 영역에 Amazon Aurora 복제본이 있는 경우 장애 조치 시 Amazon Aurora는 DB 인스턴스의 표준 이름 레코드 (CNAME)를 정상 복제본을 가리 키도록 하여 새로운 복제본으로 승격시킵니다.

장애 조치는 일반적으로 30초 내에 완료됩니다.

Amazon Aurora 복제본 (예 : 단일 인스턴스)이 없고 Aurora 서버리스를 실행하지 않는 경우 Aurora는 원래 인스턴스와 동일한 가용 영역에 새 DB 인스턴스를 생성하려고 시도합니다.

### Elastic Beanstalk

- 애플리케이션을 실행하는 인프라에 대한 염려 없이 AWS 클라우드에서 애플리케이션을 신속하게 배포 및 관리할 수 있습니다. 선택 또는 제어에 대한 제약 없이 Elastic Beanstalk의 관리 복잡성이 줄어듭니다. 애플리케이션을 업로드하기만 하면 Elastic Beanstalk에서 용량 프로비저닝, 로드 밸런싱, 조정, 애플리케이션 상태 모니터링에 대한 세부 정보를 자동으로 처리

### AWS Organizations

- AWS의 워크로드가 증가하고 확장됨에 따라 환경을 중앙에서 관리하는 데 도움이 됩니다. 성장하는 스타트업이든, 대기업이든 관계없이 AWS Organizations를 활용하면 결제를 관리하고, 액세스, 규정 준수 및 보안을 제어하고, AWS 계정에서 리소스를 공유하는 일을 모두 중앙에서 손쉽게 처리

- 계정 생성을 자동화하고, 비즈니스 요구를 반영하도록 계정 그룹을 생성하고, 거버넌스를 위해 이러한 그룹에 정책을 적용할 수 있습니다. 또한 모든 AWS 계정에 대해 단일 결제 방법을 설정하여 결제 과정을 간소화할 수도 있습니다. 다른 AWS 서비스와 통합할 경우 AWS Organizations를 사용하여 조직의 계정 전반에 걸쳐 중앙 구성 및 리소스 공유를 정의할 수 있습니다. AWS Organizations는 모든 AWS 고객이 추가 비용 없이 사용할 수 있습니다.

- 활용하면 계정에서 허용되는 서비스 및 작업을 제한할 수 있습니다. 서비스 제어 정책(SCP)을 사용하여 AWS Identity and Access Management(IAM) 사용자 및 역할에 대한 권한 보호 계층을 적용할 수 있습니다. 예를 들어 조직 계정의 사용자가 명시적으로 허용되지 않는 리전에서 리소스를 실행하지 못하도록 제한하는 SCP를 적용할 수 있을 것입니다.

### CloudWatch

- CloudWatch에는 CPU 사용률, 네트워크 사용률, 디스크 성능 및 디스크 읽기/쓰기 모니터링에 사용할 수 있는 Amazon EC2 메트릭이 있습니다. 아래 항목을 모니터링을 해야 하는 경우 Perl 또는 다른 쉘 스크립트를 사용하여 사용자 지정 메트릭을 준비해야 합니다.
  - 메모리 활용
  - 디스크 스왑 활용
  - 디스크 공간 활용
  - 페이지 파일 활용
  - 로그 수집

### Route 53 장애조치

#### 액티브-액티브 장애 조치

- 모든 리소스를 대부분의 시간 동안 사용 가능하도록 하려면 이 장애 조치 구성을 사용하십시오. 리소스를 사용할 수 없을 때는 Route 53이 비정상 상태임을 판별하여 쿼리에 응답할 때 그 리소스를 포함하지 않습니다.

- 액티브-액티브 장애 조치에서 동일한 이름, 동일한 유형(예: A 또는 AAAA) 및 동일한 라우팅 정책(예: 가중치 또는 지연 시간)를 보유한 모든 레코드는 Route 53이 이를 비정상으로 간주하지 않는 이상 활성 상태입니다. Route 53은 정상 레코드를 사용하여 DNS 쿼리에 응답할 수 있습니다.

#### 액티브-패시브 장애 조치

- 기본 리소스 또는 리소스 그룹이 대부분의 시간 동안 사용 가능하도록 하고 보조 리소스 또는 리소스 그룹은 기본 리소스가 사용 불가능할 경우를 대비해 대기 중에 있도록 하고 싶다면 이 장애 조치 구성을 사용하십시오. 쿼리에 응답할 때 Route 53은 정상적인 1차 리소스만을 포함합니다. 모든 1차 리소스가 비정상이라면, Route 53은 DNS 쿼리에 응답할 때 정상적인 2차 리소스만을 포함시키기 시작합니다.

#### 라우팅 정책

• 단순 라우팅 정책 – 도메인에 대해 특정 기능을 수행하는 하나의 리소스만 있는 경우(예: example.com 웹 사이트의 콘텐츠를 제공하는 하나의 웹 서버)에 사용합니다.

• 장애 조치 라우팅 정책 – 액티브-패시브 장애 조치를 구성하려는 경우에 사용합니다.

• 지리 위치 라우팅 정책 – 사용자의 위치에 기반하여 트래픽 라우팅하려는 경우에 사용합니다.

• 지리 근접 라우팅 정책 – 리소스의 위치를 기반으로 트래픽을 라우팅하고 필요에 따라 한 위치의 리소스에서 다른 위치의 리소스로 트래픽을 보내려는 경우에 사용합니다.

• 지연 시간 라우팅 정책 – 여러 AWS 리전에 리소스가 있고 최상의 지연 시간을 제공하는 리전으로 트래픽을 라우팅하려는 경우에 사용합니다.

• 다중 응답 라우팅 정책 – Route 53이 DNS 쿼리에 무작위로 선택된 최대 8개의 정상 레코드로 응답하게 하려는 경우에 사용합니다.

• 가중치 기반 라우팅 정책 – 사용자가 지정하는 비율에 따라 여러 리소스로 트래픽을 라우팅하려는 경우에 사용합니다.

### CloudFormation

#### Output

- 스택의 속성을 볼 때마다 반환되는 값을 설명합니다. 예를 들면 S3 버킷 이름 출력을 선언하고 나서 aws cloudformation describe-stacks AWS CLI 명령을 호출하여 해당 이름을 볼 수 있습니다.

#### Resource

- Amazon Elastic Compute Cloud 인스턴스 또는 Amazon Simple Storage Service 버킷 같은 스택 리소스 및 해당 속성을 지정합니다. 템플릿의 Resources 및 Outputs 섹션에서 리소스를 참조할 수 있습니다.

#### Parameters

- (스택을 생성하거나 업데이트할 때) 실행 시간에 템플릿에 전달하는 값입니다. 템플릿의 Resources 및 Outputs 섹션에서 파라미터를 참조할 수 있습니다.

### VPC 접속 호스트

- 보안을 강화하기 위해 특정 IP 주소의 보안 그룹만 있는 작은 EC2 인스턴스를 생성
- 이 호스트는 VPC의 다른 인스턴스에 연결하는 점프 서버 역할만 하므로 큰 인스턴스보다는 작은 인스턴스를 사용하는 것이 좋습니다.
- SSH(포트 22) 또는 RDP(포트 3389) 연결을 처리하는 데 그렇게 많은 컴퓨팅 성능이 필요하지 않기 때문에 대규모 인스턴스를 할당할 필요가 없습니다.
- 일반 사용자 ID와 미리 구성된 암호를 사용하여 SSH를 인증 정보로 사용할 수 있지만 보안 향상을 위해 SSH 인증에 공용 키 쌍을 사용하는 것이 더 안전

### 공유 책임 모델

- 보안과 규정 준수는 AWS와 고객의 공동 책임
- AWS 책임: 호스트 운영 체제 및 가상화 계층에서 서비스가 운영되는 시설의 물리적 보안에 이르기까지 구성 요소를 운영, 관리 및 제어
- 고객 책임: 게스트 운영 체제(업데이트 및 보안 패치 포함) 및 다른 관련 애플리케이션 소프트웨어를 관리하고 AWS에서 제공한 보안 그룹 방화벽을 구성할 책임

### AMI 복구

- AMI는 다른 리전에서는 액세스할 수 없으므로 재해 복구 인스턴스를 제대로 설정하려면 해당 AMI를 ap-northeast-1 영역에 복사
- CopyImage 작업을 지원하는 AWS Management Console, AWS 명령줄 도구 또는 SDK 또는 Amazon EC2 API를 사용하여 AWS 리전 내에서 또는 AWS 리전 간에 Amazon AMI(Amazon Machine Image)를 복사

## 안전한 어플리케이션 및 아키텍쳐 설계

### Site-to-Site VPN 연결

- VPC를 온프레미스 네트워크에 비공개로 연결
- VPC와 네트워크 경로 간에 전송되는 데이터는 암호화된 VPN 연결을 통해 라우팅되어 전송 데이터의 기밀성과 무결성이 유지
- 인터넷 프로토콜 보안(IPsec) VPN 연결을 지원
- IPsec은 데이터 흐름의 각 IP 패킷을 인증하고 암호화함으로써 IP 통신의 보안을 유지하는 프로토콜
- AES128 or AES256를 사용하여 암호화
- 키 교환을 위해 Diffie-Hellman 그룹을 사용할 수 있게 되어 Perfect Forward Secrecy를 제공
- SHA1 또는 SHA2 해싱 함수를 사용하여 인증
- 퍼블릭 IP 주소가 필요하지 않습니다.

### CloudHSM (Hardware Security Module)

- 기존의 데이터 보호 솔루션을 보완
- 변조 방지 하드웨어 디바이스 내에서 안전한 키 스토리지와 암호화 작업을 제공
- 암호화 키 자료를 안전하게 저장하고 해당 키 자료를 하드웨어의 암호화 경계 외부에 노출하지 않고 사용하도록 설계
- 물리적 및 논리적 변조 감지와 대응 메커니즘을 갖추고 있어 하드웨어의 키 삭제(제로화)가 트리거
- 자격 증명을 손실한 경우 Amazon은 사용자 키 또는 자격 증명에 대한 액세스 권한을 가지지 않으므로 자격 증명을 손실할 경우 키를 복구할 수 없습니다.

### S3 서버 액세스 로깅

- 버킷에 대해 이루어진 요청에 따른 상세 레코드를 제공

#### vs CloudTrail

- Amazon S3 버킷 수준 및 객체 수준 작업에 대한 자세한 API 추적을 제공하는 반면, Amazon S3에 대한 서버 액세스 로그는 Amazon S3 데이터의 객체 수준 작업에 대한 가시성을 제공

### ELB 연결 드레이닝

- 기존 연결이 열려 있는 상태에서 Classic Load Balancer가 등록 취소 중이거나 비정상 상태인 인스턴스로의 요청 전송을 중지
- 연결 드레이닝을 활성화하면 로드 밸런서가 인스턴스의 등록 취소를 보고하기 전에 연결을 유지할 수 있는 최대 시간을 지정

### VPC 공유

- 애플리케이션 리소스를 공유되는 중앙 관리형 Amazon Virtual Private Cloud(VPC)에 생성
- 이 모델에서 VPC(소유자)를 소유하는 계정은 AWS Organizations의 동일한 조직에 속한 다른 계정(참여자)과 한 개 또는 여러 개의 서브넷을 공유

### S3 암호화

#### 서버측 암호화

- 데이터 센터의 디스크에 저장하기 전에 객체를 암호화하고 객체를 다운로드할 때 이를 해독하도록 Amazon S3에 요청합니다.

1. Amazon S3 관리형 키를 사용한 서버 측 암호화(SSE-S3)
2. AWS Key Management Service에 저장된 고객 마스터 키(CMK)를 사용한 서버 측 암호화(SSE-KMS)
3. 고객 제공 키를 사용한 서버 측 암호화(SSE-C)

#### 클라이언트측 암호화

- 클라이언트 측 데이터를 암호화하여 암호화된 데이터를 Amazon S3에 업로드합니다. 이 경우 사용자가 암호화 프로세스, 암호화 키 및 관련 도구를 관리합니다.

1. AWS Key Management Service(AWS KMS)에 저장된 고객 마스터 키(CMK)를 사용
2. 애플리케이션 내에 저장한 마스터 키를 사용
